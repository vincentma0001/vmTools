/////////////////////////////////////////////////////////////////////////////////////////
//
// File name 	: CMySqlErr.h
// Version 		: 0.0.0.1
// Brief 		: 
// Auther 		: v.m.
// Create time 	: 5/12/2015 13:15:42
// Modify time 	: 5/12/2015 13:15:42
// Note 		:
//
/////////////////////////////////////////////////////////////////////////////////////////
//
// Copyright : this file is copyright by v.m.'s tools lib
//
/////////////////////////////////////////////////////////////////////////////////////////
// compile macro definition
#if defined (_MSC_VER) && (_MSC_VER >= 1300)
#pragma once
#endif

#ifndef __CMYSQLERR_H__
#define __CMYSQLERR_H__

/////////////////////////////////////////////////////////////////////////////////////////
// include file
#ifndef _mysql_h
#   error This file is need #include <winsock2.h>
#   error This file is need #include <mysql.h>
#endif
#include <string>

#ifndef __VM_TOOLS_DLLMACRO_H__
#   error This file is need #include <DllMacro.h>
#endif

/////////////////////////////////////////////////////////////////////////////////////////
#ifndef EXPORT_STL_STRING
#   define DLL_MACRO
#   define EXPORT_STL_STRING( DLL_MACRO )
#endif

EXPORT_STL_STRING( DLL_MACRO )

/////////////////////////////////////////////////////////////////////////////////////////
//
// class define : CMySqlErr
//        Notes : 获取MySql函数返回后的错误信息
//
/////////////////////////////////////////////////////////////////////////////////////////
class DLL_MACRO CMySqlErr
{
/////////////////////////////////////////////////////////////////////////////////////////
// data members :
private:
    const MYSQL&                    mstMySQL;

public:
    unsigned long                   mdwErrorCode;          // 错误代码
    std::string                     mstrErrorDes;          // 错误代码描述

/////////////////////////////////////////////////////////////////////////////////////////
// functions :
public:
	CMySqlErr( const MYSQL& objMySql ); 			        // Construct define
	virtual ~CMySqlErr(){};			                                // Destruct define

public:
    static unsigned long    GetErrCode( const MYSQL& obj );
    static const char*      GetErrDes ( const MYSQL& obj ); 

public:
    virtual std::string& ToString( void );

}; // End of class CMySqlErr
/////////////////////////////////////////////////////////////////////////////////////////
 
/////////////////////////////////////////////////////////////////////////////////////////
#endif // __CMYSQLERR_H__
/////////////////////////////////////////////////////////////////////////////////////////
// End of file CMySqlErr.h
/////////////////////////////////////////////////////////////////////////////////////////