/////////////////////////////////////////////////////////////////////////////////////////
//
// File name 	: CUsesSocket.cpp
// Version 		: 1.0.0.0
// Brief 		: 
// Author 		: v.m.
// Create time 	: 28/8/2017 8:22:18
// Modify time 	: 28/8/2017 8:22:18
// Note 		:
//
/////////////////////////////////////////////////////////////////////////////////////////
//
// Copyright : this file is copyright by vm
//
/////////////////////////////////////////////////////////////////////////////////////////

#pragma comment (lib,"ws2_32.lib")

/////////////////////////////////////////////////////////////////////////////////////////
// include file
#include <Winsock2.h>
#include <stdexcept>
#include "CUsesSocket.h"

/////////////////////////////////////////////////////////////////////////////////////////
// macro define

/////////////////////////////////////////////////////////////////////////////////////////
// namespace
namespace vm {

/////////////////////////////////////////////////////////////////////////////////////////
// Name      : CUsesSocket
// Full name : CUsesSocket::CUsesSocket
// Access    : private 
// Brief     : 
// Parameter : 
// Return    : 
// Notes     : 
CUsesSocket::CUsesSocket()
{
#ifdef WIN32
	WORD wVersionRequested = 0x202;

	if (0 != ::WSAStartup(wVersionRequested, &m_data))
	{
		// Todo :: add vm exception here
		throw std::logic_error("Cann't Starup Win32 Socket.");
	}
#endif
} // End of function CUsesSocket(...
/////////////////////////////////////////////////////////////////////////////////////////

/////////////////////////////////////////////////////////////////////////////////////////
// Name      : ~CUsesSocket
// Full name : CUsesSocket::~CUsesSocket
// Access    : public 
// Brief     : 
// Parameter : 
// Return    : 
// Notes     : 
CUsesSocket::~CUsesSocket()
{
#ifdef WIN32
	WSACleanup();
#endif
} // End of function ~CUsesSocket(...
/////////////////////////////////////////////////////////////////////////////////////////

}; // End of namespace vm
/////////////////////////////////////////////////////////////////////////////////////////

vm::CUsesSocket theSocket;

/////////////////////////////////////////////////////////////////////////////////////////
// End of file CUsesSocket.cpp
/////////////////////////////////////////////////////////////////////////////////////////