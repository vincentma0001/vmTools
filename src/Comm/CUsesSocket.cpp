
#include <Winsock2.h>
#include <stdexcept>

//#include "typedef.h"
#include "CUsesSocket.h"

/////////////////////////////////////////////////////////////////////////////////////////
// namespace VIN::Socket
/////////////////////////////////////////////////////////////////////////////////////////

namespace VIN {
namespace Socket {

/////////////////////////////////////////////////////////////////////////////////////////

CUsesSocket::CUsesSocket()
{
#ifdef WIN32
	WORD wVersionRequested = 0x202;

	if (0 != ::WSAStartup(wVersionRequested, &m_data))
	{
		throw std::logic_error( "Cann't Starup Win32 Socket." );
	}
#endif
}

/////////////////////////////////////////////////////////////////////////////////////////

CUsesSocket::~CUsesSocket()
{
#ifdef WIN32
	WSACleanup();
#endif
}

/////////////////////////////////////////////////////////////////////////////////////////
// namesapce VIN::Socket
/////////////////////////////////////////////////////////////////////////////////////////

} // End of namespace Socket
} // End of namespace VIN

/////////////////////////////////////////////////////////////////////////////////////////

VIN::Socket::CUsesSocket theSocket;

/////////////////////////////////////////////////////////////////////////////////////////
// End of file
/////////////////////////////////////////////////////////////////////////////////////////